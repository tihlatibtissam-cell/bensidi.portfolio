<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Album</title>
<style>
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:'Georgia','Times New Roman',serif; background:#4e342ece; color:#5d4037; line-height:1.6; min-height:100vh; }
  .back { position:fixed; top:20px; left:20px; background:rgba(255,255,255,0.9); color:#5d4037; border:1px solid #d7ccc8; padding:12px 20px; border-radius:25px; cursor:pointer; font-size:1rem; backdrop-filter:blur(10px); z-index:1000; transition:all 0.3s ease; font-family:'Georgia',serif; }
  .back:hover { background:#4e342e; color:#fff; box-shadow:0 4px 15px rgba(93,64,55,0.1); transform:translateY(-2px); }
  #album-title { text-align:center; padding:40px 20px 30px; font-size:2.5rem; font-weight:400; background:#4e342e; color:#b0abaa; font-family:'Georgia',serif; }
  .media-container { display:flex; flex-direction:column; width:100%; align-items:center; padding:0 20px 40px; }
  .media-item { width:100%; max-width:1200px; display:flex; justify-content:center; align-items:center; padding:25px 0; margin-bottom:10px; background:#fff; border-radius:12px; box-shadow:0 4px 15px rgba(93,64,55,0.08); border:1px solid #f5f5f5; animation:fadeInUp 0.6s ease forwards; opacity:0; }
  .media-item img, .media-item video { max-width:100%; max-height:80vh; width:auto; height:auto; display:block; border-radius:8px; }
  body::before { content:''; position:fixed; top:0; left:0; right:0; bottom:0; background-image: url("data:image/svg+xml,..."); pointer-events:none; z-index:-1; }

  @keyframes fadeInUp { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }

  @media(max-width:768px){ #album-title{font-size:2rem;padding:30px 15px 20px;} .back{padding:10px 15px;font-size:0.9rem;} .media-item{padding:20px 0;margin-bottom:8px;} .media-item img,.media-item video{max-height:75vh;} .media-container{padding:0 15px 30px;} }
  @media(max-width:480px){ #album-title{font-size:1.8rem;padding:25px 10px 15px;} .media-item{padding:15px 0;margin-bottom:5px;} .media-item img,.media-item video{max-height:70vh;} .media-container{padding:0 10px 20px;} }
  .media-item.portrait img{max-height:85vh;}
</style>
</head>
<body>

<button class="back" onclick="window.location.href='index.html'">← Retour</button>
<h2 id="album-title"></h2>
<div class="media-container" id="mediaGrid"></div>

<script>
  // Définition des noms d'album
  const albumNames = {
    'album1':'Symphonie',
    'album2':'Don du Sang',
    'album3':'TEDx',
    'album4':'Cérémonie de remise des diplômes',
    'album5':'My Lens'
  };

  // Récupération du paramètre album dans l'URL
  const urlParams = new URLSearchParams(window.location.search);
  const albumKey = urlParams.get('album');
  const mediaGrid = document.getElementById('mediaGrid');
  const albumTitle = document.getElementById('album-title');

  if(!albumKey){
    albumTitle.textContent = "Album non trouvé";
    mediaGrid.innerHTML = "<p style='text-align:center; padding:50px;'>Aucun album sélectionné.</p>";
  } else {
    albumTitle.textContent = albumNames[albumKey] || albumKey;

    // Charger les images
    const maxPhotos = 30; // nombre max de photos par album
    for(let i=1; i<=maxPhotos; i++){
      const img = document.createElement('img');
      img.src = `albums/${albumKey}/photo${i}.jpg`;
      img.alt = `Photo ${i} de ${albumTitle.textContent}`;
      img.loading = 'lazy';
      img.onerror = () => img.remove(); // supprime les images inexistantes
      img.onload = function(){
        if(this.naturalHeight > this.naturalWidth){
          this.parentElement?.classList.add('portrait');
        }
      };
      const container = document.createElement('div');
      container.className = 'media-item';
      container.appendChild(img);
      mediaGrid.appendChild(container);
    }

    // Charger les vidéos (facultatif)
    for(let i=1;i<=5;i++){
      const video = document.createElement('video');
      video.src = `albums/${albumKey}/video${i}.mov`;
      video.controls = true;
      video.playsInline = true;
      video.preload = "metadata";
      video.onerror = () => video.remove();
      const container = document.createElement('div');
      container.className = 'media-item';
      container.appendChild(video);
      mediaGrid.appendChild(container);
    }
  }
</script>
</body>
</html>
